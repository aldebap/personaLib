////////////////////////////////////////////////////////////////////////////////
//	publisher_test.go  -  Mar/01/2022  -  aldebap
//
//	Publisher entity tests
////////////////////////////////////////////////////////////////////////////////

package model

import (
	"fmt"
	"testing"
)

//	scenario 01 - test name validation
func TestPublisherNameValidation(t *testing.T) {
	t.Run(">>> publisher's name validation", func(t *testing.T) {

		//	some test cases
		var testScenarios = []struct {
			input  string
			result bool
		}{
			{input: "", result: false},
			{input: "123456789012345678901234567890123456789012345678901", result: false},
			{input: "Editora Cruz & Souza", result: false},
			{input: "Editora Joao de Barro ' or true '", result: false},
			{input: "12345678901234567890123456789012345678901234567890", result: true},
			{input: "Editora Livros do Brasil", result: true},
			{input: "Editora Letras em Ação", result: true},
		}

		for i, test := range testScenarios {
			fmt.Printf("scenario: 01.%02d name: '%s'\texpected: %t\n", i+1, test.input, test.result)

			publisher := NewPublisher(test.input)

			want := test.result
			got := publisher.IsValid()

			if want != got {
				t.Errorf("Publisher's validation: got %t, want %t", got, want)
			}
		}
	})
}

//	scenario 02 - test to check that a buffer overflow attempt is not valid
func TestPublishersBufferOverflow(t *testing.T) {
	t.Run(">>> buffer overflow on publisher's name", func(t *testing.T) {

		publisher := NewPublisher("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890" +
			"1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890" +
			"1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890" +
			"1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890" +
			"1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890" +
			"1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890" +
			"1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890" +
			"1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890" +
			"1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890" +
			"1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890" +
			"1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890" +
			"1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890" +
			"1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890" +
			"1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890" +
			"1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890" +
			"1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890" +
			"1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890" +
			"1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890" +
			"1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890" +
			"1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890" +
			"1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890" +
			"1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890" +
			"1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890" +
			"1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890" +
			"1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890" +
			"1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890" +
			"1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890" +
			"1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890" +
			"1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890" +
			"1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890" +
			"1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890" +
			"1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890" +
			"1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890" +
			"1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890" +
			"1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890" +
			"1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890" +
			"1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890" +
			"1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890" +
			"1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890" +
			"1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890")

		want := false
		got := publisher.IsValid()
		if want != got {
			t.Errorf("Publisher's validation: got %t, want %t", got, want)
		}
	})
}
